#labels Featured
== This document is relevant to Concerto 2.0.2 and higher. If you have older version installed, upgrade it (recommended) or see the [manual_201 old manual]. ==

=USER'S MANUAL=

* We suggest that you start with a [http://code.google.com/p/concerto-platform/wiki/tutorial Step-by-Step tutorial]. As it explains Concerto concepts in a more user-friendly manner. Also, please let us know if something sounds unclear to you!*



= Concept =
The idea behind Concerto is to deliver a simple yet powerful tool for the development of an adaptive on-line test. 
The platform relies on three main elements:
 # *HTML presentation layer* 
 # *R scripting logic* 
 # *SQL database backbone*

We rely as much as possible on popular open source packages in order to maximize the safety and reliability of the system, and to ensure that its elements are kept up-to-date. 


=Test and Item Template Creator / Administrator Panel =

To create or edit tests and item templates go to the administration panel: *installation_path/admin*. 

You can also create user accounts here and set the access rights. The Administration Panel has multi-language support. You can find the list of currently supported languages at the project's page. Let us know if you want to contribute and provide us with a translation to another language! 

The default language is English. To use another supported language, e.g. Polish, set the  *lng* option in the URL, e.g. */admin/?lng=pl*. This will (PL stands for Polish here).

== Elements of the administration Panel ==

There are several sections in the Administration Panel. You can get help related to particular objects by hovering your mouse pointer over the question mark icon: http://ns39618.ovh.net/~michal/concerto/question.png

== Header ==

http://ns39618.ovh.net/~michal/concerto/header.jpg

Buttons on the left allow you to quickly navigate to:
 * *Concerto Platform homepage on code.google.com* where you can find  support, report an issue with the application, download the latest version or just browse through the source code.
 * *Concerto Platform Google Group* where you can subscribe to receive the latest news about *Concerto* development and our future plans. 

The central area of the header contains the Concerto version. Below you can find the link to newer version of the system if available. 

On the right side you'll the find the information about the currently logged-in administrator and a log out button.

== Items tab==

Items Tab is the heart of whole application. Here you can create/edit/debug item templates and R syntax.

http://ns39618.ovh.net/~michal/concerto/create_item.png

=== List of item templates ===

http://ns39618.ovh.net/~michal/concerto/item_list.jpg

The list of available item templates consists all of the items that the currently logged user has the right to see. It has 5 columns: 
    # *ID* - the item template's unique system id. This ID is used in the set.next.template(template_id) function used to switch item templates.
    # *name* - the item template's name typed by the user.
    # *owner* - the person that created the item template and has full rights to modify it.
    # *sharing* - the sharing level of the specific item template.
    # *actions* - drop-down list that contains possible actions related to the item

=== Actions ===

Clicking on the choose action drop-down button
http://ns39618.ovh.net/~michal/concerto/choose_action.png
shows a list of possible actions:

http://ns39618.ovh.net/~michal/concerto/actions.png

Available actions include:
 * *Run* -  start the test using given item_template
 * *Debug*  -  start the test in a *debug* mode using given item_template
 * *edit* - open the template for editing
 * *delete* - delete template

The list can be sorted by clicking on the column header. Use a search box to search for a specific item. The list is paginated, and you can select how many items should be displayed per page and which page you want to see.

=== HTML layer tab===

http://ns39618.ovh.net/~michal/concerto/item_editor.jpg

We can divide this section into three parts:
  # the Duplicate Item Template panel allows us to import the HTML layer from another item. Simply select the "source" item from the list and click the *import HTML* button.
  # the HTML WYSIWYG editor (open-source *CKEditor*) in the middle - use it to design the Item Template's HTML layer)
  # Item properties, containing:
   * *name* - choose a name for an item (this field is obligatory)
   * *hash* generated by the platform after item is saved for the first time. It is used to set the starting item template when running the test.
   * *sharing*- access level of the current item template. 
   * *default button* - select the button (actually, the R script behind it) that is going to be executed if the time runs out and user has not clicked any button
    * *timer* sets the maximum time allowed to answer the question in the item. When time runs out, the platform executes the R script assigned to "default button"

*The HTML WYSIWYG editor allows you to insert any HTML/CSS/JS code. 
Important elements include:*
  # *HTML buttons and image buttons* - HTML buttons can have assigned *R code to execute*. Whenever the user clicks on the button, the assigned code is executed.  
  # *Other standard HTML controls* including text fields, text areas, radio buttons, check boxes, drop-down lists, etc. can be used to interact with the user. When the item is submitted, all user entered values will be stored as session variables and sent to R. You can then use them to customize any following items and/or use those variables in R scripts/calculations.
  # *session variable inserts* - You can insert any session variable anywhere in the HTML layer by defining a piece to be inserted using  double brackets and the name of the session variable (e.g. *{{variable_name}}*). This allows you to control the HTML layer from R or any other external application by simply adding an entry to the session variable tables. 
  # *standard HTML/CSS/JS* code: text, videos, sounds, images, etc.  

=== R Interaction tab===
http://ns39618.ovh.net/~michal/concerto/r_interaction.png

This section contains a list of the HTML buttons that were declared (added) to the HTML presentation layer. You can use *R code to execute* to assign R syntax that will be executed once the button is pressed by the user (or if time runs out in the case of buttons set as default). 

You can also open two "hint" boxes in this section. You can resize/move/close these boxes at any time. 
 # *Concerto built in R functions documentation* - list of Concerto functions that you can use anywhere in the R syntax.
 # *item's session variables* that contains:
   * *sent session variables* (the list of variables acquired from the current Item Template after it is submitted), 
   * *inserted session variables* (the list of inserted variables for a given item. Concerto will look for these variables in the Sessions table to customize the Item template)

=="RStudio" tab==
http://ns39618.ovh.net/~michal/concerto/r_studio.PNG

If you have *RStudio* installed on your server you can integrate it with the *Concerto Platform*. It's optional, and you can always switch it on or off using the *setup page* mentioned earlier. 

Use your system account (unix/linux) to enter R studio. 

RStudio can be useful to:
 * develop and test R code.
 * analyse the results/item banks/etc. directly on the server.
 * manage the files on the server (it has a convenient file manager). 

=="Users" tab==
http://ns39618.ovh.net/~michal/concerto/users.PNG

This tab is only accessible for *super admin* users. It allows him/her to add/remove/edit users and user groups, and to define access rights.

You can set the user's login, password, first name, last name, email, phone no., and a user group. 

=== User groups ===

You can use the "sharing" option to assign an item template to one of three groups:
 # public (all administrators can see/edit it)
 # private (only you can see/edit it)
 # group (only members of your group can see/edit it)

Super Admins can add/edit groups and assign users to groups in the "Users Tab".

= Custom R functions in Concerto =

There are two custom R functions available in Concerto

== set.var(var_name,var_value)==

This function sets session variable which can be used in HTML presentation by inserting {{var_name}} string into the item HTML. For instance you can set session variable "greeting" to value "hello":
{{{ 
set.var("greeting","hello!")
}}}
and use this variable on the item templates by inserting string in the HTML editor:

http://ns39618.ovh.net/~michal/concerto/greeting.PNG

Obviously, this function should be used to fill item templates with content, e.g. text, pictures, sounds, etc. For instance, click the
http://ns39618.ovh.net/~michal/concerto/img.PNG icon in the HTML layer editor, and insert string {{image_source}} in the "URL" field:

http://ns39618.ovh.net/~michal/concerto/image_source.PNG

Later you can use set.var() function to set this image from the R script level, e.g.: 

http://ns39618.ovh.net/~michal/concerto/r_image.PNG

== set.next.template(next_item_template_id) ==

This function sets which item should be load next when the R calculations are finished. You should use the id assigned to a given item that you can find on the item list on the right. 

For instance, if you want to set next template to demo1 (of id: 7):

http://ns39618.ovh.net/~michal/concerto/id.png

use this R code:

{{{ 
set.next.template(7)
}}}

= Running tests =

==Standard mode==

To start the test in standard mode, use the following URL:
{{{
Concerto_installation_path/index.php?hash=[item_hash] 
}}}

You can get the item's hash from the item template's list. Here is an example of the URL:  
{{{
http://dev.myiqtest.org/concerto2/index.php?hash=ab0334826613005bfcf26d52392b7ced
}}}

==Debug mode==
http://ns39618.ovh.net/~michal/concerto/debug.PNG

To start the test in *debug mode* select the *Debug* button from the Item Template's List. Alternatively, if you are an administrator you can enter debug mode by passing the *debug* option through the URL, e.g. 
{{{
Concerto_installation_path/index.php?hash=5da7d117adfd5632b8e8aa661426879f&debug
}}}
*You must be logged in to the Administration Panel to do so.* 

You will see a screen divided into two sections:
  # LEFT: The log of whatever is happening behind the scenes, including:
    # R code executed
    # R errors
  # RIGHT: Item that would be visible during normal test execution 

Additionally, you can use the buttons at the top of the page to see the list of:
 # current *session variables* 
 # variables sent to R (*R variables*)

= Setting Session Variables using URL =

Concerto allows for defining Session Variables using URL. For instance, you can use the following code to preset user_name parameter to a given value, e.g. "Michal". 
{{{
Concerto_installation_path/index.php?hash=5da7d117adfd5632b8e8aa661426879f&user_name=Michal
}}}